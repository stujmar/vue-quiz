<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./assets/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.x"></script>
    <script type="text/javascript" src="data.js"></script>
    <title>Vue | Quiz</title>
</head>
<body>
    <header class="flex-header">        
        <p class="title-text">What do </p>
        <div class="vue-logo"></div>
        <p class="title-text">ue know?</p>
    </header>
    <div  class="quiz-body">
        <div id="content"></div>
    </div>
    <script>
        Vue.config.devtools = true
        new Vue({ 
          created: function () {
            console.log('Vue created'); // Start here.
            // Load the data.
            this.data = data;
            // Pick a random start question
            let maxNum = this.data.length; // From the data length.
            let randomSeed = Math.floor(Math.random() * (maxNum)); // Pick a random Id.
            this.activeId = randomSeed; // Set first question as active id.
          },
          mounted: function(){
            // this.message = "loaded";
            console.log("Vue mounted");
            this.resetButtons();

          },
          methods: {
            answerSubmit(answerId) {
              console.log(answerId);
              this.buttons.push(4)
            },
            getRandomQuestion() {
              console.log(this.data.length)
              let maxNum = this.data.length;
              let randomSeed = Math.floor(Math.random() * (maxNum));
              console.log(randomSeed); 
              this.activeId = randomSeed;
              this.setAnswers();
              return randomSeed;
            },
            getWrongId() {
              let idsToExclude = [...this.answered, this.activeId];
              let randomId = Math.floor(Math.random() * (this.data.length));
              while (idsToExclude.includes(randomId)) {
                randomId = Math.floor(Math.random() * (this.data.length));
              }
              return randomId;
            },
            resetButtons() {
              console.log("Right answer", this.activeId);
              console.log("activeId", this.activeId);
              let wrongOne = this.getWrongId();
              let wrongTwo = this.getWrongId();
              console.log("here", this.activeId);
              this.buttons = [{ id: this.data[this.activeId].id, answer: this.data[this.activeId].answer }]
            }
          },
          data: () => ({ 
        message: 'Row',
        activeId: 0,
        answered: [4],
        data: [],
        buttons: []
      }),
          template: `
          <div>
            <h1>{{message}} your boat</h1>
            <button v-on:click="message += ' row'">Add</button>
            <h3>Question: {{data[activeId].question}}</h3>
            <input type="text">
            <button v-for="button in buttons" :key="button.id" v-on:click="answerSubmit(button)">{{this.data[button.id].answer}}</button> <br>
            <button  v-on:click="dataLoad()">refresh</button>
          </div>
          `
        }).$mount('#content');
      </script>
</body>
</html>